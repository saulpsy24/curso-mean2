<div *ngIf="cliente" class="container">
    <br>
    <div class="row card2" >
        <h1>PERFIL CLIENTE</h1>
    </div>
    <br>
    <div class="row card2" >
        <div class="col-lg-3">
            <div class="card">
                <img class="card-img-top" src="{{ url +'/get-image-user/' + cliente.image}}" *ngIf="cliente.image && cliente.image!=='null'"
                    alt="Card image cap">
                <div class="card-body">
                    <FONT FACE="Gotham Light" SIZE=4 style="color: rgb(17,152,184); text-transform: capitalize">
                        {{cliente.name}}
                    </FONT>
                    <br>
                    <FONT FACE="Gotham Light" SIZE=4 style="color: rgb(17,152,184)">
                        {{cliente.surname}}
                    </FONT>
                    <p class="card-text">

                        <a [routerLink]="['/editarcliente',cliente._id]" class="btn btn-secondary">
                        Editar <i class="fas fa-plus-circle"></i></a>
                        <br>
                        <br>
                        <a (click)="mostrarEventos()" class="btn btn-primary" *ngIf="identity.role=='ROLE_ADMIN'">
                         Inscribir a Evento <i class="fas fa-plus-circle"></i></a>

                </div>

            </div>

        </div>
        <div class="row " style="width: 40%">
            <div class="col-lg-8">
                <table class="egt">
                        <tr>
        
                                <th>
                                    <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(17,152,184)">
                                            Farmacia:
                                    </FONT>
                                </th>
        
                                <td>
                                    <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(127,127,127)">
                                        {{cliente.nameEstablishment}}
                                    </FONT>
                                </td>
        
                            </tr>
                            <br>
                            <tr>
        
                                <th>
                                    <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(17,152,184)">
                                        Código de Farmacia:
                                    </FONT>
                                </th>
        
                                <td>
                                    <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(127,127,127)">
                                        {{cliente.code}}
                                    </FONT>  
                                </td>
        
                            </tr>
                            <br>
                            <tr>
        
                                <th>
                                    <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(17,152,184)">
                                            Email:
                                    </FONT>
                                </th>
        
                                <td>
                                    <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(127,127,127)">
                                        {{cliente.email}}
                                    </FONT> 
                                </td>
        
                            </tr>
                            <br>
                            <tr>
        
                                <th>
                                    <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(17,152,184)">
                                            Teléfono:
                                    </FONT>
                                </th>
        
                                <td>
                                    <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(127,127,127)">
                                        {{cliente.phone}}
                                    </FONT> 
                                </td>
        
                            </tr>
                            <br>
                            <tr>
        
                                <th>
                                    <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(17,152,184)">
                                        NIF/CIF:
                                    </FONT>
                                </th>
        
                                <td>
                                    <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(127,127,127)">
                                        {{cliente.nifCif}}
                                    </FONT>
                                </td>
        
                            </tr>
                            <br>
                            <tr>
        
                                <th>
                                    <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(17,152,184)">
                                            Provincia:
                                    </FONT>
                                </th>
        
                                <td>
                                    <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(127,127,127)">
                                        {{cliente.province}}
                                    </FONT>
                                </td>
        
                            </tr>
                            <br>
                            <tr>
        
                                <th>
                                    <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(17,152,184)">
                                            Dirección:
                                    </FONT>
                                </th>
        
                                <td>
                                    <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(127,127,127)">
                                        {{cliente.street}}
                                    </FONT>
                                </td>
            
                            </tr>
                            <br>
                            <tr>
    
                                <th>
                                    <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(17,152,184)">
                                            Código Postal:
                                    </FONT>
                                </th>
        
                                <td>
                                    <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(127,127,127)">
                                        {{cliente.zip}}
                                    </FONT>
                                </td>
                            </tr>
                            <br>
                            <tr>
                            
        
                                <th>
                                    <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(17,152,184)">
                                        Rol:
                                    </FONT>
                                </th>
        
                                <td>
                                    <FONT *ngIf="cliente.role=='ROLE_ADMIN'" FACE="Gotham Light" SIZE=2 style="color: rgb(127,127,127)">
                                            Administrador
                                    </FONT>
                                    <FONT *ngIf="cliente.role=='ROLE_USER'" FACE="Gotham Light" SIZE=2 style="color: rgb(127,127,127)">
                                            Usuario
                                    </FONT>
                                    <FONT *ngIf="cliente.role=='ROLE_AGENTE'" FACE="Gotham Light" SIZE=2 style="color: rgb(127,127,127)">
                                            Agente
                                    </FONT>
                                    <FONT *ngIf="cliente.role=='ROLE_ENCARGADO'" FACE="Gotham Light" SIZE=2 style="color: rgb(127,127,127)">
                                            Encargado
                                    </FONT>
                                </td>
        
                            </tr>
                </table>
            </div>
        </div>
        <div class="col-lg-4">
            <table class="egt">
                
                    <tr>
        
                        <th>
                            <FONT FACE="Gotham Light" SIZE=2 style="color: rgb(17,152,184)">
                                    Marcas:
                            </FONT>
                        </th>
    
                        <td >
                            <FONT *ngIf="cliente.brandV=='1'"  FACE="Gotham Light" SIZE=2 style="color: rgb(127,127,127); ">
                                    Vichy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </FONT>
                            <FONT *ngIf="cliente.brandSK=='1'"  FACE="Gotham Light" SIZE=2 style="color: rgb(127,127,127);">
                                    SkinCeuticals&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </FONT>
                            <FONT *ngIf="cliente.brandLR=='1'"  FACE="Gotham Light" SIZE=2 style="color: rgb(127,127,127); ">
                                    La Roche-Posay&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </FONT>
                            <FONT *ngIf="cliente.brandRG=='1'"  FACE="Gotham Light" SIZE=2 style="color: rgb(127,127,127); ">
                                    Roger&Gallet&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </FONT>
                            <FONT *ngIf="cliente.brandCV=='1'"  FACE="Gotham Light" SIZE=2 style="color: rgb(127,127,127); ">
                                    CeraVE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </FONT>
                        </td>
    
                    </tr>
            </table>
            <br>
            <br>
            <br>
            <br>
            <div class="row">

                <div class="col-md-3">
                    <div *ngIf="cliente.file && cliente.file !=null">
                        <a class="btn btn-md btn-primary" href="{{url+'get-ficha/'+cliente.file}}">
                            <i class="fas fa-file-download"></i>&nbsp;Descargar Ficha</a>
                    </div>
                </div>
            </div>

        </div>


    </div>
    <br>
    <div class="row card2" *ngIf="oculto">
        <div *ngIf="!selected">
        <label for="Eventos">Seleccionar Evento:</label>
        <table class="table table-black">
            <thead>
                <tr>

                    <th scope="col">Titulo del evento</th>
                    <th scope="col">Provincia</th>
                    <th scope="col">Seleccionar</th>
                </tr>
            </thead>
            <tbody>
                <tr class="animated bounceInRight" *ngFor="let event of eventos | filter:term:brand:visible:name:email:establecimiento:phone">

                    <td scope="row">{{event.title}}</td>
                    <td>{{event.province}}</td>
                    <td><a (click)="mostrarTurnos(event)" class="btn btn-primary btn-md">
                            <i class="fas fa-info-circle"></i> Seleccionar</a></td>
                    

                </tr>

            </tbody>
        </table>
    </div>

    <div *ngIf="selected">
        <label  for="turno">Seleccionar Turno:</label>
        <table class="table table-black">
            <thead>
                <tr>

                    <th scope="col">Nombre</th>
                    <th scope="col">Hora Inicio</th>
                    <th scope="col">Hora Fin</th>
                    <th scope="col">Fecha Inicio</th>
                    <th scope="col">Fecha Fin</th>
                    <th scope="col">Plazas disponibles</th>
                    <th scope="col">Inscribir</th>
                </tr>
            </thead>
            <tbody>
                <tr class="animated bounceInRight" *ngFor="let turno of turnos | filter:term:brand:visible:name:email:establecimiento:phone">

                    <td scope="row">{{turno.name}}</td>
                    <td>{{turno.start_h}}</td>
                    <td>{{turno.end_h}}</td>
                    <td>{{turno.date_start}}</td>
                    <td>{{turno.date_end}}</td>
                    <td>{{turno.aforo}}</td>
                    <td>
                        <a (click)="GeneraAsistencia(turno)" class="btn btn-primary btn-md">
                                <i class="fas fa-plus-circle"></i> Inscribir</a>
                    </td>
                   
                </tr>

            </tbody>
        </table>
    </div>

    </div>

    <div class="row card2" >
        <div class="col-lg-12">
            <h2 style="text-transform: capitalize;">EVENTOS DE {{cliente.name}} </h2>
        </div>
        <hr>


                <table  class="table table-black">
                        <thead>
                          <tr>
                            
                            <th scope="col">Imagen</th>
                            <th scope="col">Título del Evento</th>
                            <th scope="col">Campaña</th>
                            <th scope="col">Fecha Inicio</th>
                            <th scope="col">Fecha Fin</th>
                            <th scope="col"> Turno</th>
                            <th scope="col"> Acciones</th>
                          </tr>
                        </thead>
                        <tbody>
                       <tr class="animated bounceInRight" *ngFor="let asist of asistencias ">
                            <td scope="row"><img src="{{url+'get-image-user/'+cliente.image}}" class="useravatarnav"></td>
                            <td>{{asist.turno.event.title}}</td>
                            <td>{{asist.turno.event.campana}}</td>
                            <td>{{asist.turno.date_start}}</td>
                            <td>{{asist.turno.date_end}}</td>
                            <td>{{asist.turno.name}}</td>
                            <td><div class="buttons animated fadeIn" *ngIf="showoptions==0">

                                    <a (click)="onDeleteConfirm(asist._id)" *ngIf="identity.role=='ROLE_ADMIN'" class="btn btn-md btn-primary">
                                        <i class="fas fa-window-close"></i>
                                        Dar de Baja</a>
        
                                </div>
                                <div class="seguro animated fadeIn" *ngIf="confirmado==asist._id">
                                    <a (click)="onDeleteAsistencia(asist._id)" class="btn btn-md btn-danger">
                                        <i class="fas fa-window-close"></i> confirmado</a>
                                    <a (click)="onCancelAsistencia()" class="btn btn-md btn-secondary">
                                        <i class="fas fa-ban"></i> Cancelar</a>
                                </div></td>
                            
                          </tr>
              
                        </tbody>
                      </table>

    </div>
    <!-- <div class="row card2" >
        <div id="kDMYz" style="display:inline-block; padding-left: 3%; padding-right:3%;width: 20%;">
            <img id="kDMY_0" style="width:100%;" class="img-responsive" src="../../assets/images/vichy.jpeg">
        </div>
        <div id="kDMYz" style="display:inline-block; padding-left: 3%; padding-right:3%; width: 20%;">
            <img id="kDMY_0" style="width:100%;" class="img-responsive" src="../../assets/images/roche.jpeg">
        </div>
        <div id="kDMYz" style="display:inline-block; padding-left: 3%; padding-right:3%; width: 20%;">
            <img id="kDMY_0" style="width:100%;" class="img-responsive" src="../../assets/images/skins.jpeg">
        </div>
        <div id="kDMYz" style="display:inline-block; padding-left: 3%; padding-right:3%; width: 20%;">
            <img id="kDMY_0" style="width:100%;" class="img-responsive" src="../../assets/images/roger.jpeg">
        </div>
        <div id="kDMYz" style="display:inline-block; padding-left: 3%; padding-right:3%;width: 20%;">
            <img id="kDMY_0" style="width:100%;" class="img-responsive" src="../../assets/images/CERAVE.png">
        </div>
    
    </div> -->
        <br><br><br>
    </div>

    <br>
    
    <hr>